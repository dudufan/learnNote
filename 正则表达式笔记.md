扩展正则表达式是现代标准
有时要用基本正则表达式，如sed。但sed却支持了字符类的语法
# 元字符
## 单个字符匹配
**[] 表示单个字符的范围**
字符集合 [ ]中的元字符都失去正则表达式中的特殊含义， 比如[\n] 匹配换行符
```python
\d  匹配一个数字
\w  匹配一个字母或数字或下划线或汉字，注意不能匹配标点符号如减号
\ 引用
```
## 限定符
```shell
* 表示任意个字符（包括0个）、
+ 表示至少一个字符
?  表示0个或1个字符
{n}  表示n个字符
{n,m}  表示n-m个字符
{n,} 限定n次以上
```
## 锚-定位符

单词：由字母/数字/下划线字符构成的连续字符序列

| \b   | 匹配一个单词边界，即字与空格间的位置。 |
| ---- | -------------------------------------- |
| \B   | 非单词边界匹配。                       |


## 字符类

字符放在方括号中，叫字符类（不包含方括号）。

C排序序列可以使用a-zA-Z，可以测试下

```shell
# data
A
a

grep '[A-Z]' data 
```

可以设置环境变量LC_COLLATE来改变排序序列。



```shell
[^abc]    任何字符，除了 a、b 或 c（否定）
[a-z&&m-p]    a 到 z，而非 m 到 p：[a-lq-z]（减去）
[^a-zA-Z0-9] 除字母和数字外的符号
[\u4e00-\u9fa5] 中文字符
```



预定义字符类，使用时外面要再套上一层方括号。

```shell
[:lower:]
[:alnum:] 大小写字母/数字
[:punct:] 标点符号
[:blank:] 空格或制表符

# 实例
grep '21[[:alpha:]]' data
grep '[[:punct:]]\{1,\}' rex
# 非字母字符
grep '[^[:alpha:]]' data
```
# 分组
\number可以在匹配串中使用，代表和当前串中第number个分组相同的串
$number可以用来替换，代表原字符串中分组的具体内容
(?P=name) 引用 (?P<name>...)的有名称分组
# 贪婪匹配
最后需要特别指出的是，正则匹配默认是贪婪匹配，也就是匹配尽可能多的字符。
通过在 ```*+?```等表示重复的限定符之后放置?，该表达式从"贪心"表达式转换为"非贪心"表达式或者最小匹配。
# 更精确的匹配
## 匹配空白字符
匹配任何空白字符，包括空格、制表符、换页符、回车等等
[\s\n] 等价于[ [ \f\n\r\t\v]
## 变量长度1-20
`[a-zA-Z\_][0-9a-zA-Z\_]{0, 19}` 更精确地限制了变量的长度是1-20个字符（前面1个字符+后面最多19个字符）
## 字符或
一般用(A | B),比如`PATTERN_BLANK = r'^(\s*|\s*//.*)$'`
A|B 可以匹配A或B
所以` (P|p)ython` 可以匹配 'Python' 或者 'python'
## 匹配开头结尾
`^` 表示行的开头，` ^\d` 表示必须以数字开头。
`$` 表示行的结束，` \d$` 表示必须以数字结束。
## 零宽断言

必须带括号

```shell
(?:str)   非捕获组
(?=str) 肯定式向前查找。实际匹配的是前面的串
(?!str) 否定式向前查找
(?<=str) 肯定式向后查找
(?<!str) 否定式向后查找

如：
^### (?=[\u4e00-\u9fa5]) 匹配markdown中文###标题
```
https://segmentfault.com/a/1190000019266662‘’
## 其他特殊字符
# 实例
## 正则表达式匹配数字范围
匹配0-255的数值范围
0 - 9
10 - 99
100 - 199
200 - 249
250 - 255
匹配ip
```
 re.search(r'(([01]?\d?\d|2[0-4]\d|25[0-5])\.){3}( [01]?\d?\d|2[0-4]\d|25[0-5] )','156.1.54.123')
```
## 编辑器中用正则替换
Find: =(ts.*)
Replase: =${dbname!"$1"}
上面括号表示的分组用来保存原字符串
```shell
//(.*SDK)
$1
```
银企通settings.gradle
```shell
(include.*(SSP-.*):\2" *) --> //$1
(include.*(SSP-.*):(SSP-Release-.*)" *) --> //$1
```
# 基本正则表达式
```shell
\{\} 不使用?+表示，只能使用花括号表示限定
\(\) 圆括号必须使用反斜线引用
不能使用竖线
不能使用预定义字符类
```
